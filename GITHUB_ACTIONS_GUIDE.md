# ğŸš€ å¦‚ä½•è§¦å‘ GitHub Actions è‡ªåŠ¨ç¼–è¯‘

## âœ… å‰ææ¡ä»¶

åœ¨è§¦å‘ GitHub Actions ä¹‹å‰ï¼Œ**å¿…é¡»å…ˆå®Œæˆç­¾åå¯†é’¥é…ç½®**ï¼š

1. âœ… å·²ç”Ÿæˆ `release.keystore` æ–‡ä»¶
2. âœ… å·²è½¬æ¢ä¸º Base64 æ ¼å¼
3. âœ… å·²åœ¨ GitHub ä»“åº“ä¸­é…ç½® 4 ä¸ª Secretsï¼š
   - `KEYSTORE_BASE64`
   - `KEYSTORE_PASSWORD`
   - `KEY_ALIAS`
   - `KEY_PASSWORD`

> å¦‚æœè¿˜æ²¡æœ‰å®Œæˆï¼Œè¯·å…ˆæŸ¥çœ‹ `RELEASE_SETUP.md` å®Œæˆé¦–æ¬¡è®¾ç½®ï¼

---

## ğŸ¯ è§¦å‘æ–¹å¼ï¼šæ¨é€ Git Tag

GitHub Actions é…ç½®ä¸º**å½“æ¨é€ `v*` æ ¼å¼çš„ tag æ—¶è‡ªåŠ¨è§¦å‘**ã€‚

### **å®Œæ•´æµç¨‹ï¼š**

```bash
# 1. ç¡®ä¿æ‰€æœ‰ä»£ç å·²æäº¤
git add .
git commit -m "feat: å®Œæˆæ–°åŠŸèƒ½å¼€å‘"

# 2. æ¨é€åˆ°è¿œç¨‹ä»“åº“
git push origin main

# 3. åˆ›å»ºç‰ˆæœ¬ tagï¼ˆæ ¼å¼ï¼švä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·ï¼‰
git tag v1.0.0

# 4. æ¨é€ tag åˆ° GitHubï¼ˆè¿™ä¼šè§¦å‘ GitHub Actionsï¼‰
git push origin v1.0.0
```

---

## ğŸ“ ç‰ˆæœ¬å·è§„èŒƒ

### **è¯­ä¹‰åŒ–ç‰ˆæœ¬ï¼ˆSemantic Versioningï¼‰ï¼š**

æ ¼å¼ï¼š`vä¸»ç‰ˆæœ¬.æ¬¡ç‰ˆæœ¬.ä¿®è®¢å·`

| ç‰ˆæœ¬ç±»å‹ | ä½•æ—¶é€’å¢ | ç¤ºä¾‹ |
|---------|---------|------|
| **ä¸»ç‰ˆæœ¬** | ä¸å…¼å®¹çš„ API ä¿®æ”¹ | v1.0.0 â†’ v2.0.0 |
| **æ¬¡ç‰ˆæœ¬** | å‘ä¸‹å…¼å®¹çš„åŠŸèƒ½æ–°å¢ | v1.0.0 â†’ v1.1.0 |
| **ä¿®è®¢å·** | å‘ä¸‹å…¼å®¹çš„é—®é¢˜ä¿®æ­£ | v1.0.0 â†’ v1.0.1 |

### **ç¤ºä¾‹ï¼š**

```bash
# é¦–æ¬¡å‘å¸ƒ
git tag v1.0.0

# ä¿®å¤ Bug
git tag v1.0.1

# æ·»åŠ æ–°åŠŸèƒ½
git tag v1.1.0

# é‡å¤§æ›´æ–°
git tag v2.0.0
```

---

## ğŸ”„ GitHub Actions æ‰§è¡Œæµç¨‹

æ¨é€ tag åï¼ŒGitHub Actions ä¼šè‡ªåŠ¨æ‰§è¡Œä»¥ä¸‹æ­¥éª¤ï¼š

```
1. âœ… æ£€å‡ºä»£ç 
2. âœ… è®¾ç½® JDK 17
3. âœ… è§£ç ç­¾åå¯†é’¥
4. âœ… é…ç½®ç­¾åç¯å¢ƒå˜é‡
5. âœ… ç¼–è¯‘ Release APKï¼ˆå·²ç­¾åï¼‰
6. âœ… é‡å‘½å APK ä¸º TaskWizard-v1.0.0.apk
7. âœ… è®¡ç®— SHA256 æ ¡éªŒå’Œ
8. âœ… ç”Ÿæˆåˆ†ç±» Changelog
9. âœ… åˆ›å»º GitHub Release
10. âœ… ä¸Šä¼  APK åˆ° Release
11. âœ… æ¸…ç†ç­¾åå¯†é’¥
```

**é¢„è®¡æ—¶é—´ï¼š** 3-5 åˆ†é’Ÿ

---

## ğŸ‘€ æŸ¥çœ‹æ„å»ºè¿›åº¦

### **æ–¹æ³• 1ï¼šGitHub Actions é¡µé¢**

1. è®¿é—®ä½ çš„ GitHub ä»“åº“
2. ç‚¹å‡»é¡¶éƒ¨çš„ **Actions** æ ‡ç­¾
3. æŸ¥çœ‹æœ€æ–°çš„ workflow è¿è¡ŒçŠ¶æ€

### **æ–¹æ³• 2ï¼šå‘½ä»¤è¡ŒæŸ¥çœ‹**

```bash
# ä½¿ç”¨ GitHub CLIï¼ˆéœ€è¦å…ˆå®‰è£… ghï¼‰
gh run list
gh run view <run-id>
```

---

## ğŸ“¦ æŸ¥çœ‹å‘å¸ƒç»“æœ

æ„å»ºæˆåŠŸåï¼š

1. è®¿é—® GitHub ä»“åº“çš„ **Releases** é¡µé¢
2. æ‰¾åˆ°å¯¹åº”ç‰ˆæœ¬çš„ Releaseï¼ˆå¦‚ v1.0.0ï¼‰
3. ä¸‹è½½ APK æ–‡ä»¶
4. æŸ¥çœ‹ Changelog å’Œ SHA256 æ ¡éªŒå’Œ

**Release é¡µé¢ç¤ºä¾‹ï¼š**

```
ğŸš€ TaskWizard v1.0.0

ğŸ“¦ ä¸‹è½½
APK æ–‡ä»¶: TaskWizard-v1.0.0.apk
SHA256 æ ¡éªŒå’Œ: abc123...

ğŸ“ æ›´æ–°æ—¥å¿—
âœ¨ æ–°åŠŸèƒ½
- feat: æ·»åŠ è‡ªåŠ¨å¾ªç¯åŠŸèƒ½ (a1b2c3d)

ğŸ› Bug ä¿®å¤
- fix: ä¿®å¤ STOP æŒ‰é’®å¡é¡¿ (j1k2l3m)

âš¡ æ€§èƒ½ä¼˜åŒ–
- perf: ä¼˜åŒ–å†å²è®°å½•åŠ è½½ (m4n5o6p)

âš™ï¸ ç³»ç»Ÿè¦æ±‚
- Android 8.0 (API 26) æˆ–æ›´é«˜ç‰ˆæœ¬
- éœ€è¦å®‰è£… Shizuku
- éœ€è¦å®‰è£… ADB Keyboard
```

---

## ğŸ”§ å¸¸è§é—®é¢˜

### **Q1: æ¨é€ tag åæ²¡æœ‰è§¦å‘ GitHub Actionsï¼Ÿ**

**æ£€æŸ¥æ¸…å•ï¼š**
- âœ… Tag æ ¼å¼æ˜¯å¦æ­£ç¡®ï¼ˆå¿…é¡»æ˜¯ `v*` æ ¼å¼ï¼Œå¦‚ `v1.0.0`ï¼‰
- âœ… Tag æ˜¯å¦æˆåŠŸæ¨é€åˆ° GitHubï¼ˆè¿è¡Œ `git ls-remote --tags origin`ï¼‰
- âœ… `.github/workflows/release.yml` æ–‡ä»¶æ˜¯å¦å­˜åœ¨
- âœ… GitHub Actions æ˜¯å¦å¯ç”¨ï¼ˆSettings â†’ Actions â†’ Generalï¼‰

### **Q2: æ„å»ºå¤±è´¥ - "Keystore not found"**

**åŸå› ï¼š** GitHub Secrets æœªé…ç½®æˆ–é…ç½®é”™è¯¯

**è§£å†³ï¼š**
1. æ£€æŸ¥ 4 ä¸ª Secrets æ˜¯å¦éƒ½å·²æ·»åŠ 
2. ç¡®è®¤ `KEYSTORE_BASE64` å†…å®¹å®Œæ•´
3. ç¡®è®¤å¯†ç å’Œåˆ«åæ­£ç¡®

### **Q3: æ„å»ºå¤±è´¥ - "OutOfMemoryError"**

**åŸå› ï¼š** JVM å†…å­˜ä¸è¶³

**éªŒè¯ä¿®å¤ï¼š**
- æ£€æŸ¥ `gradle.properties` ä¸­çš„ `org.gradle.jvmargs` é…ç½®
- æ£€æŸ¥ `app/build.gradle.kts` ä¸­çš„ Lint é…ç½®

### **Q4: å¦‚ä½•åˆ é™¤é”™è¯¯çš„ tagï¼Ÿ**

```bash
# åˆ é™¤æœ¬åœ° tag
git tag -d v1.0.0

# åˆ é™¤è¿œç¨‹ tag
git push origin :refs/tags/v1.0.0
```

### **Q5: å¦‚ä½•é‡æ–°è§¦å‘æ„å»ºï¼Ÿ**

**æ–¹æ³• 1ï¼šåˆ é™¤å¹¶é‡æ–°æ¨é€ tag**
```bash
# åˆ é™¤è¿œç¨‹ tag
git push origin :refs/tags/v1.0.0

# é‡æ–°æ¨é€ tag
git push origin v1.0.0
```

**æ–¹æ³• 2ï¼šåœ¨ GitHub Actions é¡µé¢æ‰‹åŠ¨é‡æ–°è¿è¡Œ**
1. è®¿é—® Actions é¡µé¢
2. é€‰æ‹©å¤±è´¥çš„ workflow
3. ç‚¹å‡» "Re-run all jobs"

---

## ğŸ“‹ å®Œæ•´ç¤ºä¾‹ï¼šå‘å¸ƒ v1.0.0

```bash
# 1. ç¡®ä¿åœ¨æ­£ç¡®çš„åˆ†æ”¯
git checkout main
git pull origin main

# 2. æäº¤æ‰€æœ‰æ›´æ”¹
git add .
git commit -m "feat: å®Œæˆ v1.0.0 æ‰€æœ‰åŠŸèƒ½"
git push origin main

# 3. åˆ›å»ºå¹¶æ¨é€ tag
git tag v1.0.0
git push origin v1.0.0

# 4. æŸ¥çœ‹æ„å»ºè¿›åº¦
# è®¿é—® https://github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“/actions

# 5. ç­‰å¾… 3-5 åˆ†é’Ÿåï¼Œè®¿é—® Releases é¡µé¢
# https://github.com/ä½ çš„ç”¨æˆ·å/ä½ çš„ä»“åº“/releases
```

---

## ğŸ¯ æœ€ä½³å®è·µ

### **1. æäº¤ä¿¡æ¯è§„èŒƒ**

ä½¿ç”¨è§„èŒƒçš„æäº¤ä¿¡æ¯å‰ç¼€ï¼Œä»¥ç”Ÿæˆæ¸…æ™°çš„ Changelogï¼š

```bash
git commit -m "feat: æ·»åŠ æ–°åŠŸèƒ½"
git commit -m "fix: ä¿®å¤ Bug"
git commit -m "refactor: é‡æ„ä»£ç "
git commit -m "perf: æ€§èƒ½ä¼˜åŒ–"
git commit -m "docs: æ›´æ–°æ–‡æ¡£"
git commit -m "chore: å…¶ä»–æ”¹åŠ¨"
```

### **2. ç‰ˆæœ¬å·ç®¡ç†**

- é¦–æ¬¡å‘å¸ƒä½¿ç”¨ `v1.0.0`
- å°ä¿®å¤é€’å¢ä¿®è®¢å·ï¼š`v1.0.1`, `v1.0.2`
- æ–°åŠŸèƒ½é€’å¢æ¬¡ç‰ˆæœ¬ï¼š`v1.1.0`, `v1.2.0`
- é‡å¤§æ›´æ–°é€’å¢ä¸»ç‰ˆæœ¬ï¼š`v2.0.0`, `v3.0.0`

### **3. å‘å¸ƒå‰æ£€æŸ¥**

```bash
# 1. æœ¬åœ°æµ‹è¯•ç¼–è¯‘
./gradlew assembleDebug

# 2. æ£€æŸ¥ä»£ç è´¨é‡
./gradlew lint

# 3. è¿è¡Œæµ‹è¯•
./gradlew test

# 4. ç¡®è®¤æ‰€æœ‰æ›´æ”¹å·²æäº¤
git status

# 5. æ¨é€ tag
git tag v1.0.0
git push origin v1.0.0
```

---

## ğŸ“ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ GitHub Actions æ—¥å¿—ï¼ˆActions é¡µé¢ï¼‰
2. æ£€æŸ¥æœ¬æ–‡æ¡£çš„å¸¸è§é—®é¢˜éƒ¨åˆ†
3. æŸ¥çœ‹ `RELEASE_SETUP.md` çš„æ•…éšœæ’æŸ¥éƒ¨åˆ†
4. åœ¨ Issues ä¸­æé—®

---

## ğŸ‰ æ€»ç»“

**è§¦å‘ GitHub Actions åªéœ€ 3 æ­¥ï¼š**

```bash
1. git commit -m "feat: å®ŒæˆåŠŸèƒ½"
2. git tag v1.0.0
3. git push origin v1.0.0
```

**ç„¶åç­‰å¾… 3-5 åˆ†é’Ÿï¼Œåœ¨ Releases é¡µé¢ä¸‹è½½ APKï¼** ğŸš€
